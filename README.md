# Телеграм бот для публикации комиксов о Python

Данный бот выкладывает [комиксы о Python](https://xkcd.com/353/) в Телеграм канал.

### Как установить

Python3 должен быть уже установлен.
Затем используйте `pip` (или `pip3`, есть есть конфликт с Python2) для установки зависимостей:

```
pip install -r requirements.txt
```

Далее добавьте в папку с проектом файл `.env` и скопируйте туда следующий код:

```
TG_API_KEY=''
CHAT_ID=''
PATH_TO_IMAGES=''
PUBLICATION_PERIOD=''
```

TG_API_KEY - API ключ телеграм-бота.

PUBLICATION_PERIOD - период публикации каждой картинки в автоматическом режиме. Можно использовать сокращенные формы
записи, например, `1h` - 1 час,`1s` - 1 секунда, `1m` - 1 минута, `1d` - 1 день, `1wk` - 1 неделя. Более подробное
описание можно прочитать в [документации](https://pypi.org/project/pytimeparse/).

CHAT_ID - ссылка на Telegram канал через `@` (`t.me` не включать!).

PATH_TO_IMAGES - путь до каталога, куда будут загружаться фотографии комиксов.

**Внимание!** Не все переменные обязательные, зависит от конкретного запуска скрипта. Описание запусков смотри ниже.

## Скрипт `auto_publisher_tg_bot.py`

Скрипт предназначен для отправки фотографий в Telegram канал в автоматическом или одноразовом режиме. Автоматический режим предусматривает бесконечную публикацию комиксов с задержкой. В одноразовом режиме скреп отправляет только один случайный комикс. Все скачанные комиксы удаляются из указанного каталога после публикации.

Запуск скрипта осуществляется через консоль.

```
python auto_publisher_tg_bot.py
```

Данная команда поддерживает опциональные аргументы:

`-p` путь каталога с фотографиями. Значение по умолчанию - каталог `images`, который располагается в каталоге с
проектом. Ввод пути осуществлять внутри кавычек `"path"`

`-per` период отправки фотографий. Значение по умолчанию - 4 часа. Это время, через которое осуществляется публикация
комикса. Комиксы могут повторяться!

`--once` указывать, если скрипт нужен только для отправки **одного** комикса

Также вместо аргументов командной строки можно пользоваться переменными окружения: `PATH_TO_IMAGES` и
`PUBLICATION_PERIOD`.

**Обязательными переменными окружения являются:**

* TG_API_KEY
* CHAT_ID

**Опциональными переменными окружения являются:**

* PATH_TO_IMAGES
* PUBLICATION_PERIOD

## Цель проекта

Код написан в образовательных целях.